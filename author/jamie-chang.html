<!DOCTYPE html>
<html lang="en">
        <head>
                        <meta charset="utf-8" />
                        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
                        <meta name="generator" content="Pelican" />
                        <title>Jamie's Blog - Jamie Chang</title>
                        <link rel="stylesheet" href="../theme/css/main.css" />
                                <link href="https://blog.changs.co.uk/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Jamie's Blog Atom Feed" />
                        <!-- Cloudflare Web Analytics --><script defer src='https://static.cloudflareinsights.com/beacon.min.js' data-cf-beacon='{"token": "0358c4be608641c1ad90cd87801da29b"}'></script><!-- End Cloudflare Web Analytics -->
        </head>

        <body id="index" class="home">
                <header id="banner" class="body">
                        <h1><a href="../">Jamie's Blog</a></h1>
                        <nav><ul>
                                                <li><a href="../category/blog.html">Blog</a></li>
                        </ul></nav>
                </header><!-- /#banner -->

                <aside id="featured" class="body">
                    <article>
                        <h1 class="entry-title"><a href="../replacing-tox-with-uv.html">Replacing tox with UV</a></h1>
<footer class="post-info">
        <abbr class="published" title="2026-02-01T00:00:00+00:00">
                Published: Sun 01 February 2026
        </abbr>

                <address class="vcard author">
                        By                                 <a class="url fn" href="../author/jamie-chang.html">Jamie Chang</a>
                </address>
        <p>In <a href="../category/blog.html">Blog</a>.</p>
<p>tags: <a href="../tag/python.html">Python</a> <a href="../tag/uv.html">UV</a> <a href="../tag/tutorial.html">Tutorial</a> </p>        
</footer><!-- /.post-info --><p>Recently I've been updating some of my libraries to Python 3.10+ after Python 3.9 has finally reached end of life.</p>
<blockquote class="bluesky-embed" data-bluesky-uri="at://did:plc:7w4a4uncvgnzucylyosrfmm2/app.bsky.feed.post/3m4jmi5pl7s2d" data-bluesky-cid="bafyreihfz4h6q555jetztj2o4e5a2kbq7k6qkrjrttv2l3lpz5df4isrpm" data-bluesky-embed-color-mode="system"><p lang="en">The final release of Python 3.9 is out!

discuss.python.org/t/the-final-...

May you all enjoy using the features added in Python 3.10 if that&#x27;s now your oldest version. üòÅ

docs.python.org/3/whatsnew/3...<br><br><a href="https://bsky.app/profile/did:plc:7w4a4uncvgnzucylyosrfmm2/post/3m4jmi5pl7s2d?ref_src=embed">[image or embed]</a></p>&mdash; Brett Cannon (<a href="https://bsky.app/profile/did:plc:7w4a4uncvgnzucylyosrfmm2?ref_src=embed">@snarky.ca</a>) <a href="https://bsky.app/profile/did:plc:7w4a4uncvgnzucylyosrfmm2/post/3m4jmi5pl7s2d?ref_src=embed">31 October 2025 at 23:20</a></blockquote>
<script async src="https://embed.bsky.app/static/embed.js" charset="utf-8"></script>

<p>The upgrade to Python 3.10 is a relatively simple one, but I thought it be a good idea to run tests on different versions of Python.</p>
<h3>Existing Tooling</h3>
<p><a href="https://tox.wiki/en/4.34.1/user_guide.html">tox</a> is a common tool for this use case, it allows you to define environments declaratively. </p>
<div class="highlight"><pre><span></span><code><span class="n">requires</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;tox&gt;=4&quot;</span><span class="p">]</span>
<span class="n">env_list</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;3.14&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;3.13&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;3.12&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;3.11&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;3.10&quot;</span><span class="p">]</span>

<span class="k">[env_run_base]</span>
<span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;run unit tests&quot;</span>
<span class="n">deps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s2">&quot;pytest&gt;=8&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;pytest-sugar&quot;</span>
<span class="p">]</span>
<span class="n">commands</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[[</span><span class="s2">&quot;pytest&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">replace</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;posargs&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;tests&quot;</span><span class="p">],</span><span class="w"> </span><span class="n">extend</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">}]]</span>
</code></pre></div>

<p>Similarly <a href="https://nox.thea.codes/en/stable/">nox</a> let's you do the same but in a more imperative way.</p>
<h3>uv to rule them all</h3>
<p>The thing is, tox and nox requires learning and using a new set of tools, whilst that's completely fine <code>uv</code> has spoiled us with the convenience of using a single tool.</p>
<p>There's already a lot that can be replaced by <code>uv</code>, for example:</p>
<div class="highlight"><pre><span></span><code>python<span class="w"> </span>-m<span class="w"> </span>venv
uv<span class="w"> </span>venv
</code></pre></div>

<div class="highlight"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>...
uv<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>...
</code></pre></div>

<div class="highlight"><pre><span></span><code>pyenv<span class="w"> </span>install<span class="w"> </span>...
uv<span class="w"> </span>python<span class="w"> </span>install<span class="w"> </span>...
</code></pre></div>

<p>I read an <a href="https://til.simonwillison.net/python/uv-tests">article</a> from Simon Willison where he already worked out how to test a package with different Python versions with the <a href="https://docs.astral.sh/uv/reference/cli/#uv-run--python"><code>-p</code> flag</a>.</p>
<div class="highlight"><pre><span></span><code>uv<span class="w"> </span>run<span class="w"> </span>-p<span class="w"> </span><span class="m">3</span>.10<span class="w"> </span>pytest
</code></pre></div>

<p>This is pretty much job done here! But we can go a bit further ...</p>
<h4>Extras</h4>
<p>You can specify any extras and dependency groups via <code>--extra</code> and <code>--group</code> respectively:</p>
<div class="highlight"><pre><span></span><code>uv<span class="w"> </span>run<span class="w"> </span>-p<span class="w"> </span><span class="m">3</span>.10<span class="w"> </span>--extra<span class="w"> </span>cli<span class="w"> </span>pytest
</code></pre></div>

<div class="highlight"><pre><span></span><code>uv<span class="w"> </span>run<span class="w"> </span>-p<span class="w"> </span><span class="m">3</span>.10<span class="w"> </span>--group<span class="w"> </span><span class="nb">test</span><span class="w"> </span>pytest
</code></pre></div>

<h4>Overriding Package Versions</h4>
<p>A common use of <code>tox</code> is to test over different package versions, for example, if a package needs to support both <code>pydantic==1.*.*</code> and  <code>pydantic==2.*.*</code>. We can also do this in uv with the <code>--with</code> or <code>-w</code> options:</p>
<div class="highlight"><pre><span></span><code>uv<span class="w"> </span>run<span class="w"> </span>-w<span class="w"> </span><span class="s1">&#39;pydantic==1.*.*&#39;</span><span class="w"> </span>pytest
uv<span class="w"> </span>run<span class="w"> </span>-w<span class="w"> </span><span class="s1">&#39;pydantic==2.*.*&#39;</span><span class="w"> </span>pytest
</code></pre></div>

<p>This also works for a set of deps in a <code>requirements.txt</code> file:</p>
<div class="highlight"><pre><span></span><code>uv<span class="w"> </span>run<span class="w"> </span>--with-requirements<span class="w"> </span>requirements-production.txt<span class="w"> </span>pytest
</code></pre></div>

<p>Simon's article also mentions using <code>--with-editable</code> to test with the local version of the code, which can come in handy:</p>
<div class="highlight"><pre><span></span><code>uv<span class="w"> </span>run<span class="w"> </span>--with<span class="w"> </span><span class="s1">&#39;pydantic==1.*.*&#39;</span><span class="w"> </span>--with-editable<span class="w"> </span><span class="s1">&#39;mylocal-package&#39;</span><span class="w"> </span>pytest
</code></pre></div>

<h4>Using an isolated venv</h4>
<p>Simon also mentions using an isolated venv:</p>
<div class="highlight"><pre><span></span><code>uv<span class="w"> </span>run<span class="w"> </span>--with<span class="w"> </span><span class="s1">&#39;pydantic==1.*.*&#39;</span><span class="w"> </span>--isolated<span class="w"> </span>pytest
</code></pre></div>

<p>to avoid your test venv contaminating your development venv or vice versa.</p>
<p>I found this most useful when I needed to run tests in parallel, something like:</p>
<div class="highlight"><pre><span></span><code>parallel<span class="w"> </span><span class="s2">&quot;uv run -p {} --isolated pytest&quot;</span><span class="w"> </span>:::<span class="w"> </span><span class="m">3</span>.<span class="o">{</span><span class="m">10</span>..14<span class="o">}</span>
</code></pre></div>

<p>This is a quick proof of concept but you can probably write a more robust bash or python script.</p>
<h3>Conclusion</h3>
<p><code>tox</code> still remains useful especially with something like <a href="https://github.com/tox-dev/tox-uv">tox-uv</a>. But if you're using uv anyway it may be useful to learn all the options mentioned above.</p>
<p>I've already had a lot of success using <code>uv</code> to quickly debug issues caused by version incompatibilities in pandas, something that just takes a bit more time to setup with tools like <code>tox</code>.</p>                    </article>
                </aside><!-- /#featured -->
                    <section id="content" class="body">
                        <h1>Other articles</h1>
                        <hr />
                        <ol id="posts-list" class="hfeed">

                <li><article class="hentry">
                    <header>
                        <h1><a href="../webasgi-run-python-web-apps-in-a-browser.html" rel="bookmark"
                               title="Permalink to Webasgi - Run python web apps in a browser">Webasgi - Run python web apps in a browser</a></h1>
                    </header>

                    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2026-01-26T00:00:00+00:00">
                Published: Mon 26 January 2026
        </abbr>

                <address class="vcard author">
                        By                                 <a class="url fn" href="../author/jamie-chang.html">Jamie Chang</a>
                </address>
        <p>In <a href="../category/blog.html">Blog</a>.</p>
        
</footer><!-- /.post-info -->                        <p>I recently published a project <a href="https://jamie-chang.github.io/webasgi/">webasgi</a> a static site allows you run <a href="https://fastapi.tiangolo.com/">FastAPI</a> and other <a href="https://asgi.readthedocs.io/en/latest/">asgi</a> apps (such as <a href="https://litestar.dev/">litestar</a>) right in the browser.</p>
<p><img alt="webasgi" src="../images/webasgi.png"></p>
<p>As you can imagine, Python web apps are not designed to run statically in the browser, and this project has been particularly challenging to me, in ‚Ä¶</p>
                        <a class="readmore" href="../webasgi-run-python-web-apps-in-a-browser.html">read more</a>
                    </div><!-- /.entry-content -->
                </article></li>

                <li><article class="hentry">
                    <header>
                        <h1><a href="../writing-a-sqs-task-framework-from-scratch.html" rel="bookmark"
                               title="Permalink to Writing a SQS task framework from scratch">Writing a SQS task framework from scratch</a></h1>
                    </header>

                    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2026-01-18T00:00:00+00:00">
                Published: Sun 18 January 2026
        </abbr>

                <address class="vcard author">
                        By                                 <a class="url fn" href="../author/jamie-chang.html">Jamie Chang</a>
                </address>
        <p>In <a href="../category/blog.html">Blog</a>.</p>
<p>tags: <a href="../tag/python.html">Python</a> <a href="../tag/asyncio.html">Asyncio</a> <a href="../tag/sqs.html">SQS</a> </p>        
</footer><!-- /.post-info -->                        <p>Recently I've been working on framework to run LLM tasks using AWS's excellent <a href="https://aws.amazon.com/sqs/">SQS</a>. And I made the decision to write my own task framework/library as opposed to using a pre-exiting framework. I thought this would be a great opportunity to discuss the considerations and levels of abstractions involved ‚Ä¶</p>
                        <a class="readmore" href="../writing-a-sqs-task-framework-from-scratch.html">read more</a>
                    </div><!-- /.entry-content -->
                </article></li>

                <li><article class="hentry">
                    <header>
                        <h1><a href="../asyncio-is-neither-fast-nor-slow.html" rel="bookmark"
                               title="Permalink to Asyncio is neither fast nor slow">Asyncio is neither fast nor slow</a></h1>
                    </header>

                    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2026-01-12T00:00:00+00:00">
                Published: Mon 12 January 2026
        </abbr>

                <address class="vcard author">
                        By                                 <a class="url fn" href="../author/jamie-chang.html">Jamie Chang</a>
                </address>
        <p>In <a href="../category/blog.html">Blog</a>.</p>
        
</footer><!-- /.post-info -->                        <p><strong><em>Don't listen to random benchmarks..</em></strong></p>
<p>I recently came across an <a href="https://hackeryarn.com/post/async-python-benchmarks/">article</a> benchmarking Python performances in web frameworks, comparing asyncio and sync performance. </p>
<p>The author sets out to measure performance of <a href="https://fastapi.tiangolo.com/">FastAPI</a>/<a href="https://www.djangoproject.com/">Django</a> web servers running with postgresql comparing async and non-async workloads. The methodology is pretty reasonable, the following is ‚Ä¶</p>
                        <a class="readmore" href="../asyncio-is-neither-fast-nor-slow.html">read more</a>
                    </div><!-- /.entry-content -->
                </article></li>

                <li><article class="hentry">
                    <header>
                        <h1><a href="../i-was-wrong-about-subinterpreters.html" rel="bookmark"
                               title="Permalink to I was wrong about Subinterpreters">I was wrong about Subinterpreters</a></h1>
                    </header>

                    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2026-01-01T00:00:00+00:00">
                Published: Thu 01 January 2026
        </abbr>

                <address class="vcard author">
                        By                                 <a class="url fn" href="../author/jamie-chang.html">Jamie Chang</a>
                </address>
        <p>In <a href="../category/blog.html">Blog</a>.</p>
<p>tags: <a href="../tag/python.html">Python</a> <a href="../tag/pthon.html">œÄthon</a> <a href="../tag/python314.html">Python3.14</a> <a href="../tag/subinterpreters.html">Subinterpreters</a> </p>        
</footer><!-- /.post-info -->                        <p><strong><em>... but that's actually a good thing</em></strong></p>
<p>I've already written a ton about subinterpreters since a year ago:  </p>
<ul>
<li><a href="../how-good-are-sub-interpreters-in-python-now.html">How good are sub-interpreters in Python now?</a></li>
<li><a href="../python-314-state-of-free-threading.html">Python 3.14: State of free threading</a></li>
<li><a href="../subinterpreters-and-asyncio.html">Subinterpreters and Asyncio</a></li>
</ul>
<p>Recently I had some time to dig a bit deeper into subinterpreters and check my understanding ‚Ä¶</p>
                        <a class="readmore" href="../i-was-wrong-about-subinterpreters.html">read more</a>
                    </div><!-- /.entry-content -->
                </article></li>

                <li><article class="hentry">
                    <header>
                        <h1><a href="../trying-out-marimo-notebooks.html" rel="bookmark"
                               title="Permalink to Trying out marimo notebooks">Trying out marimo notebooks</a></h1>
                    </header>

                    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2025-12-03T00:00:00+00:00">
                Published: Wed 03 December 2025
        </abbr>

                <address class="vcard author">
                        By                                 <a class="url fn" href="../author/jamie-chang.html">Jamie Chang</a>
                </address>
        <p>In <a href="../category/blog.html">Blog</a>.</p>
        
</footer><!-- /.post-info -->                        <p>As we approach the holiday seasons, we get to "enjoy" another 12 days of <a href="https://adventofcode.com/">Advent of Code</a>. Every year I try to do something a little different, last year I had a lot of fun solving it in Ocaml, prior years I've tried the latest Python features. This year I've ‚Ä¶</p>
                        <a class="readmore" href="../trying-out-marimo-notebooks.html">read more</a>
                    </div><!-- /.entry-content -->
                </article></li>

                <li><article class="hentry">
                    <header>
                        <h1><a href="../fixing-lazy-imports-generating-static-types-dynamically.html" rel="bookmark"
                               title="Permalink to Fixing lazy imports: Generating Static Types Dynamically">Fixing lazy imports: Generating Static Types Dynamically</a></h1>
                    </header>

                    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2025-10-29T00:00:00+00:00">
                Published: Wed 29 October 2025
        </abbr>

                <address class="vcard author">
                        By                                 <a class="url fn" href="../author/jamie-chang.html">Jamie Chang</a>
                </address>
        <p>In <a href="../category/blog.html">Blog</a>.</p>
        
</footer><!-- /.post-info -->                        <p>So I've just released a package called <a href="https://pypi.org/project/lazy-helper/">lazy-helper</a>. This comes as lazy loading has been a hot topic once again due to the proposal <a href="https://peps.python.org/pep-0810/">PEP-810</a>.</p>
<p>Using my package we can define lazy loaded dependencies nicely:</p>
<p><img alt="Defining a lazy module" src="../images/lazypy.png"></p>
<p>Coincidentally Brian Okken has recently written a <a href="https://pythontest.com/polite-lazy-imports-python-packages/">blog post</a> covering the topic of lazy loading ‚Ä¶</p>
                        <a class="readmore" href="../fixing-lazy-imports-generating-static-types-dynamically.html">read more</a>
                    </div><!-- /.entry-content -->
                </article></li>

                <li><article class="hentry">
                    <header>
                        <h1><a href="../python-314-3-asyncio-changes.html" rel="bookmark"
                               title="Permalink to Python 3.14: 3 Asyncio Changes">Python 3.14: 3 Asyncio Changes</a></h1>
                    </header>

                    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2025-10-09T00:00:00+01:00">
                Published: Thu 09 October 2025
        </abbr>

                <address class="vcard author">
                        By                                 <a class="url fn" href="../author/jamie-chang.html">Jamie Chang</a>
                </address>
        <p>In <a href="../category/blog.html">Blog</a>.</p>
<p>tags: <a href="../tag/python.html">Python</a> <a href="../tag/pthon.html">œÄthon</a> <a href="../tag/python314.html">Python3.14</a> <a href="../tag/asyncio.html">asyncio</a> </p>        
</footer><!-- /.post-info -->                        <p>Python 3.14 was officially released on October 7th. There are a lot of new features and I've covered some of them before in:</p>
<ul>
<li><a href="../python-314-3-smaller-features.html">Python 3.14: 3 smaller features</a></li>
<li><a href="../t-strings-the-good-and-the-ugly.html">t-strings: the good and the ugly</a></li>
<li><a href="../subinterpreters-and-asyncio.html">Subinterpreters and Asyncio</a></li>
</ul>
<p>What I haven't covered here are any of the asyncio changes ‚Ä¶</p>
                        <a class="readmore" href="../python-314-3-asyncio-changes.html">read more</a>
                    </div><!-- /.entry-content -->
                </article></li>

                <li><article class="hentry">
                    <header>
                        <h1><a href="../finally-trying-out-mojo.html" rel="bookmark"
                               title="Permalink to Finally trying out Mojo üî•">Finally trying out Mojo üî•</a></h1>
                    </header>

                    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2025-10-02T00:00:00+01:00">
                Published: Thu 02 October 2025
        </abbr>

                <address class="vcard author">
                        By                                 <a class="url fn" href="../author/jamie-chang.html">Jamie Chang</a>
                </address>
        <p>In <a href="../category/blog.html">Blog</a>.</p>
<p>tags: <a href="../tag/mojo.html">Mojo</a> <a href="../tag/python.html">Python</a> <a href="../tag/advent-of-code.html">Advent of Code</a> </p>        
</footer><!-- /.post-info -->                        <p><a href="https://www.modular.com/mojo">Mojo</a> has been on my radar for a while. In fact, I heard about it on launch back in May 2023. It was touted as a super set of Python with 10000s of times the performance. It's main focus is on AI related workloads with strong built in support of ‚Ä¶</p>
                        <a class="readmore" href="../finally-trying-out-mojo.html">read more</a>
                    </div><!-- /.entry-content -->
                </article></li>

                <li><article class="hentry">
                    <header>
                        <h1><a href="../blog-1-year-in.html" rel="bookmark"
                               title="Permalink to Blog 1 year in">Blog 1 year in</a></h1>
                    </header>

                    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2025-09-24T00:00:00+01:00">
                Published: Wed 24 September 2025
        </abbr>

                <address class="vcard author">
                        By                                 <a class="url fn" href="../author/jamie-chang.html">Jamie Chang</a>
                </address>
        <p>In <a href="../category/blog.html">Blog</a>.</p>
        
</footer><!-- /.post-info -->                        <p>It's been just over a year since I started my blog. In fact, this is my 27th blog post. I thought it'd be a good time for me to share some insights on blogging.</p>
<h3>Motivation</h3>
<p>Recently I've been asked by some people on why I do this. I think for ‚Ä¶</p>
                        <a class="readmore" href="../blog-1-year-in.html">read more</a>
                    </div><!-- /.entry-content -->
                </article></li>
                    </ol><!-- /#posts-list -->
  <nav>
    <ul>
      <li>Page 1 / 4</li>
        <li><a href="../author/jamie-chang2.html">&rang;</a></li>
        <li><a href="../author/jamie-chang4.html">&Rang;</a></li>
    </ul>
  </nav>
                    </section><!-- /#content -->
                <section id="extras" class="body">
                                <div class="social">
                                        <h2>social</h2>
                                        <ul>
                                                        <li><a href="https://blog.changs.co.uk/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                                                        <li><a href="https://github.com/Jamie-Chang/">Github</a></li>
                                                        <li><a href="https://www.linkedin.com/in/jamie-chang-4423ba125/">LinkedIn</a></li>
                                                        <li><a href="https://bsky.app/profile/changs.co.uk/">Bluesky</a></li>
                                        </ul>
                                </div><!-- /.social -->
                </section><!-- /#extras -->

                <footer id="contentinfo" class="body">
                        <address id="about" class="vcard body">
                                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                        </address><!-- /#about -->

                        <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
                </footer><!-- /#contentinfo -->

        </body>
</html>